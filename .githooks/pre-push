#!/bin/bash
# Pre-push hook to run RuboCop auto-correction
# This ensures code is properly formatted before pushing

echo "üîç Running RuboCop auto-correction before push..."

# Run RuboCop with auto-correction for all files
bundle exec rubocop -a

# Check the exit status
RUBOCOP_EXIT_CODE=$?

if [ $RUBOCOP_EXIT_CODE -ne 0 ]; then
  echo "‚ö†Ô∏è  RuboCop found issues that couldn't be auto-corrected."
  echo "Consider fixing these issues manually later."
  echo "To see all issues, run: bundle exec rubocop"
  echo ""
fi

echo "‚úÖ RuboCop auto-correction complete! Proceeding with push..."
exit 0
