#!/bin/bash
# Pre-push hook to run RuboCop auto-correction
# This ensures code is properly formatted before pushing

echo "üîç Running RuboCop auto-correction before push..."

# Run RuboCop with auto-correction for all files
bundle exec rubocop -a

# Check the exit status
RUBOCOP_EXIT_CODE=$?

if [ $RUBOCOP_EXIT_CODE -ne 0 ]; then
  echo "‚ùå RuboCop found issues that couldn't be auto-corrected."
  echo "Please fix the remaining issues manually before pushing."
  echo ""
  echo "To see all issues, run: bundle exec rubocop"
  echo "To skip this hook, use: git push --no-verify"
  exit 1
fi

echo "‚úÖ RuboCop auto-correction complete! Proceeding with push..."
exit 0
