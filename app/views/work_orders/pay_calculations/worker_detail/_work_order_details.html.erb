<div class="border-bottom mt-5 pb-2">
  <div class="fw-bold fs-4" style="color: #155e1a">Work Order Details (<%= (Date.strptime(pay_calculation.month_year, '%Y-%m').strftime('%B') rescue pay_calculation.month_year) %>)</div>
</div>
<div id="work_orders_pay_calculations" class="card shadow-sm mb-4">
  <div class="card-body">
    <div class="table-responsive">
      <table class="table table-hover table-sm mb-0">
        <thead class="header-row">
          <tr class="header-row">
            <th class="text-center"></th>
            <th class="text-center">Date</th>
            <th class="text-center">Work Order ID</th>
            <th class="text-center">Work Order Name</th>
            <th class="text-end">Rate (RM)</th>
            <th class="text-end">Overall Total (RM)</th>
          </tr>
        </thead>
        <tbody>
          <% if work_order_workers.any? %>
            <% work_order_workers.each do |work_order_worker| %>
              <tr>
                <td></td>
                <td class="text-center"><%= work_order_worker.work_order.created_at&.strftime('%d-%m-%Y') || 'N/A' %></td>
                <td class="text-center"><%= work_order_worker.work_order.id %></td>
                <td class="text-center"><%= work_order_worker.work_order.work_order_rate&.work_order_name || 'N/A' %></td>
                <td class="text-end"><%= number_to_currency(work_order_worker.rate, unit: '', separator: '.', delimiter: ',', precision: 2) %></td>
                <td class="text-end"><%= number_to_currency(work_order_worker.amount, unit: '', separator: '.', delimiter: ',', precision: 2) %></td>
              </tr>
            <% end %>
            <% if pay_calculation_detail.present? %>
              <tr class="table-secondary">
                <td colspan="5" class="text-end"><strong>Total Gross Salary (RM)</strong></td>
                <td class="text-end"><strong><%= number_to_currency(pay_calculation_detail.gross_salary, unit: '', separator: '.', delimiter: ',', precision: 2) %></strong></td>
              </tr>
            <% end %>
          <% else %>
            <tr>
              <td colspan="6" class="text-center text-muted py-4">
                No work orders found for this worker in <%= pay_calculation.month_year %>.
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>
