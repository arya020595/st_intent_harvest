<% work_order_policy = record_policy(work_order, WorkOrders::DetailPolicy) %>
<tr id="<%= dom_id(work_order) %>">
  <td class="text-center">
    <div class="d-inline-flex gap-1 justify-content-center" style="min-width: 90px;">
      <%= link_to work_orders_detail_path(work_order),
            class: "action-btn info",
            title: "View Details" do %>
        <i class="bi bi-info-circle-fill"></i>
      <% end %>
      <% if work_order_policy.edit? %>
        <%= link_to edit_work_orders_detail_path(work_order),
              class: "action-btn warning",
              title: "Edit" do %>
          <i class="bi bi-pencil-fill"></i>
        <% end %>
      <% else %>
        <span class="action-btn warning disabled opacity-50" aria-disabled="true" title="Edit unavailable for Pending/Completed">
          <i class="bi bi-pencil-fill"></i>
        </span>
      <% end %>
      <% if work_order_policy.destroy? %>
        <%= link_to confirm_delete_work_orders_detail_path(work_order),
                class: "action-btn danger",
                title: "Delete",
                **modal_link_data(size: "modal-md") do %>
          <i class="bi bi-trash-fill"></i>
        <% end %>
      <% else %>
        <span class="action-btn danger disabled opacity-50" aria-disabled="true" title="Delete unavailable for Pending/Completed">
          <i class="bi bi-trash-fill"></i>
        </span>
      <% end %>
    </div>
  </td>
  <td class="text-center"><%= work_order.id %></td>
  <td><%= work_order.work_order_rate_name %></td>
  <td><%= work_order.block_number.presence || 'N/A' %></td>
  <td class="text-center"><%= work_order.start_date&.strftime('%d-%m-%Y') || '-' %></td>
  <td class="text-center"><%= work_order.completion_date&.strftime('%d-%m-%Y') || '-' %></td>
  <td class="text-center">
    <% badge_class = case work_order.work_order_status
      when 'ongoing' then 'bg-info'
      when 'pending' then 'bg-warning'
      when 'amendment_required' then 'bg-danger'
      when 'completed' then 'bg-success'
      else 'bg-secondary'
    end %>
    <span class="badge <%= badge_class %>"><%= work_order.work_order_status == 'pending' ? 'Pending Approval' : work_order.work_order_status&.humanize %></span>
  </td>
</tr>
