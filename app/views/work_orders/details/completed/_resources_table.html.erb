<%# Resources & Machineries Table - Only for resources_type work orders %>
<div class="card shadow-sm mb-4">
  <div class="p-4">
    <div class="table-responsive">
      <table class="table table-hover table-sm mb-0">
        <thead class="header-row">
          <tr class="header-row">
            <th class="text-center">Resources Name</th>
            <th class="text-center">Resource Category</th>
            <th class="text-center">Unit</th>
            <th class="text-center">Price (RM)</th>
          </tr>
        </thead>
        <tbody>
          <% if work_order.work_order_items.any? %>
            <% work_order.work_order_items.each do |item| %>
              <tr>
                <td class="text-center"><%= item.item_name %></td>
                <td class="text-center"><%= item.category_name || '-' %></td>
                <td class="text-center"><%= item.unit_name || '-' %></td>
                <td class="text-center"><%= number_to_currency(item.price, unit: '', separator: '.', delimiter: ',', precision: 2) %></td>
              </tr>
            <% end %>
            <tr class="table-secondary">
              <td colspan="3" class="text-center"><strong>Total</strong></td>
              <td class="text-center"><strong><%= number_to_currency(work_order.work_order_items.sum(:price), unit: '', separator: '.', delimiter: ',', precision: 2) %></strong></td>
            </tr>
          <% else %>
            <tr>
              <td colspan="4" class="text-center text-muted">No resources used</td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>
