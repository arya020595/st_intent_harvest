<%# Work Order Details Card - displays type-specific fields %>
<div class="card shadow-sm mb-4">
  <div class="container-fluid p-4">
    <div class="row">
      <div class="col-md-6 mb-3">
        <label class="form-label fw-bold">Work Order ID</label>
        <div class="p-2 rounded"><%= work_order.id %></div>
      </div>
      <% if work_order.normal_type? %>
        <div class="col-md-6 mb-3">
          <label class="form-label fw-bold">Block No.</label>
          <div class="p-2 rounded"><%= work_order.block_number.presence || 'N/A' %></div>
        </div>
      <% end %>
      <div class="col-md-6 mb-3">
        <label class="form-label fw-bold">Work Order</label>
        <div class="p-2 rounded"><%= work_order.work_order_rate_name %></div>
      </div>
      <% if work_order.resources_type? && work_order.vehicle.present? %>
        <div class="col-md-6 mb-3">
          <label class="form-label fw-bold">Vehicle Number</label>
          <div class="p-2 rounded"><%= work_order.vehicle_number || 'N/A' %></div>
        </div>
        <div class="col-md-6 mb-3">
          <label class="form-label fw-bold">Vehicle Model</label>
          <div class="p-2 rounded"><%= work_order.vehicle_model || 'N/A' %></div>
        </div>
        <div class="col-md-6 mb-3">
          <label class="form-label fw-bold">Date of Usage</label>
          <div class="p-2 rounded"><%= work_order.date_of_usage&.strftime('%d-%m-%Y') || '-' %></div>
        </div>
      <% end %>
      <% if work_order.normal_type? %>
        <div class="col-md-6 mb-3">
          <label class="form-label fw-bold">Rate (RM)</label>
          <div class="p-2 rounded"><%= number_to_currency(work_order.work_order_rate_price, unit: 'RM ', separator: '.', delimiter: ',', precision: 2) %></div>
        </div>
      <% end %>
      <%# Date field - varies by work order type %>
      <% if work_order.normal_type? %>
        <div class="col-md-6 mb-3">
          <label class="form-label fw-bold">Starting Date</label>
          <div class="p-2 rounded"><%= work_order.start_date&.strftime('%d-%m-%Y') || '-' %></div>
        </div>
        <div class="col-md-6 mb-3">
          <label class="form-label fw-bold">Completion Date</label>
          <div class="p-2 rounded"><%= work_order.completion_date&.strftime('%d-%m-%Y') || @completion_history&.created_at&.strftime('%d-%m-%Y') || '-' %></div>
        </div>
      <% else %>
        <div class="col-md-6 mb-3">
          <label class="form-label fw-bold">Date</label>
          <div class="p-2 rounded"><%= work_order.created_at&.strftime('%d-%m-%Y') %></div>
        </div>
      <% end %>
      <%# Total Amount - varies by work order type %>
      <div class="col-md-6 mb-3">
        <label class="form-label fw-bold">Total Amount</label>
        <div class="p-2 rounded">
          <%= if work_order.resources_type?
                   'N/A'
                 else
                   number_to_currency(work_order.work_order_workers.sum(:amount), unit: 'RM ', separator: '.', delimiter: ',', precision: 2)
                 end %>
        </div>
      </div>
      <% if work_order.normal_type? %>
        <div class="col-md-6 mb-3">
          <label class="form-label fw-bold">Field Conductor</label>
          <div class="p-2 rounded"><%= work_order.field_conductor_name || '-' %></div>
        </div>
        <div class="col-md-6 mb-3">
          <label class="form-label fw-bold">Total No. of Workers</label>
          <div class="p-2 rounded"><%= work_order.work_order_workers.count %></div>
        </div>
      <% end %>
    </div>
  </div>
</div>
