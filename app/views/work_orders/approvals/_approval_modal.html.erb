<!-- Approval Modal -->
<div class="modal fade"
     id="approvalModal"
     tabindex="-1"
     aria-labelledby="approvalModalLabel"
     aria-hidden="true"
     data-controller="approval-modal"
     data-approval-modal-work-order-id-value="<%= work_order.id %>"
     data-approval-modal-approve-url-value="<%= approve_work_orders_approval_path(work_order) %>"
     data-approval-modal-amendment-url-value="<%= request_amendment_work_orders_approval_path(work_order) %>">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header border-0 pb-0">
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body text-center py-4">
        <div class="mb-3">
          <i class="bi bi-exclamation-circle text-danger" style="font-size: 4rem;"></i>
        </div>
        <h5 class="modal-title mb-4 fw-bold fs-5" id="approvalModalLabel">Approve this Work Order?</h5>
        <div data-approval-modal-target="buttonGroup" class="d-flex gap-2 justify-content-center mb-3">
          <% if work_order.may_request_amendment? %>
            <%= button_tag type: "button",
                class: "btn btn-warning px-4 fw-bold fs-5 text-white",
                data: { action: "click->approval-modal#selectAmendment" } do %>
              Amendment Required
            <% end %>
          <% end %>
          <% if work_order.may_approve? %>
            <%= button_tag type: "button",
                class: "btn btn-success px-4 fw-bold fs-5",
                data: { action: "click->approval-modal#selectApprove" } do %>
              Approve
            <% end %>
          <% end %>
        </div>
        <!-- Remarks Field (Initially Hidden, shows only for Amendment) -->
        <div data-approval-modal-target="remarksField" class="mb-3" style="display: none;">
          <textarea data-approval-modal-target="approvalRemarks"
                    class="form-control"
                    placeholder="Enter your remarks here"
                    rows="4" required maxlength="500"></textarea>
        </div>
        <!-- Submit Approval Button (Initially Hidden) -->
        <div data-approval-modal-target="submitField" style="display: none;">
          <%= button_tag type: "button",
              class: "btn btn-success w-100 fw-bold fs-5",
              data: { action: "click->approval-modal#submitApproval" } do %>
            <i class="bi bi-check-circle me-1 text-white"></i> Submit Approval
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>
