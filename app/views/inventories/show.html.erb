<%= turbo_frame_tag "modal" do %>
  <div class="modal-content">
    <div class="modal-header d-flex justify-content-between align-items-center" style="padding: 20px;">
      <h5 class="mb-0"><strong>Inventory Details</strong></h5>
      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
    </div>
    <div class="modal-body">
      <dl class="row mb-4">
        <dt class="col-sm-3">Name:</dt>
        <dd class="col-sm-9"><%= @inventory.name %></dd>
        <dt class="col-sm-3">Category:</dt>
        <dd class="col-sm-9"><%= @inventory.category&.name || '-' %></dd>
        <dt class="col-sm-3">Unit:</dt>
        <dd class="col-sm-9"><%= @inventory.unit&.name || '-' %></dd>
        <dt class="col-sm-3">Total Stock:</dt>
        <dd class="col-sm-9"><%= @inventory.total_stock %> <%= @inventory.unit&.name %></dd>
      </dl>
      <% if @recent_orders.any? %>
        <div class="d-flex justify-content-between align-items-center mb-3">
          <h6 class="fw-bold mb-0">Purchase History</h6>
          <% if @inventory.inventory_orders.count > 5 %>
            <small class="text-muted">Showing 5 of <%= @inventory.inventory_orders.count %> total orders</small>
          <% end %>
        </div>
        <div class="table-responsive">
          <table class="table table-sm table-bordered">
            <thead class="table-light">
              <tr>
                <th>Supplier</th>
                <th>Purchase Date</th>
                <th class="text-end">Quantity</th>
                <th class="text-end">Unit Price</th>
                <th class="text-end">Total Price</th>
              </tr>
            </thead>
            <tbody>
              <% @recent_orders.each do |order| %>
                <tr>
                  <td><%= order.supplier %></td>
                  <td><%= order.purchase_date.strftime("%d-%m-%Y") %></td>
                  <td class="text-end"><%= order.quantity %></td>
                  <td class="text-end">
                    <%= number_to_currency(order.unit_price, unit: 'RM ', precision: 2) %>
                  </td>
                  <td class="text-end">
                    <%= number_to_currency(order.total_price, unit: 'RM ', precision: 2) %>
                  </td>
                </tr>
              <% end %>
            </tbody>
          </table>
        </div>
      <% else %>
        <p class="text-muted">No purchase orders recorded yet.</p>
      <% end %>
    </div>
  </div>
<% end %>
